# ğŸ”„ BIDIRECTIONAL FLOW DIAGRAM

## **CURRENT STATE (BROKEN)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USER        â”‚â”€â”€â”€â–¶â”‚      LLM        â”‚â”€â”€â”€â–¶â”‚      MCP        â”‚
â”‚ "Run NUKE-001"  â”‚    â”‚   Calls MCP     â”‚    â”‚ Loads workflows â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                       â”‚   HARDCODED     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚  ceo-config.yamlâ”‚
                       â”‚ (static prompts)â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚      LLM        â”‚
                       â”‚  Generic Responseâ”‚
                       â”‚ (not max power) â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚      USER       â”‚
                       â”‚ Gets mediocre   â”‚
                       â”‚    response     â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## **TARGET STATE (DYNAMIC)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USER        â”‚
â”‚ "Run NUKE-001"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    step 1    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LLM        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚      MCP        â”‚
â”‚   Calls MCP     â”‚               â”‚ Workflow Engine â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                                 â”‚
          â”‚                                 â–¼
          â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                        â”‚ DYNAMIC LOADER  â”‚
          â”‚                        â”‚ contexts/agents/â”‚
          â”‚                        â”‚ /eeps/nfj-      â”‚
          â”‚                        â”‚ visionary.yaml  â”‚
          â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                  â”‚
          â”‚                                  â–¼
          â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                        â”‚  PROMPT ASSEMBLERâ”‚
          â”‚                        â”‚ Converts YAML   â”‚
          â”‚                        â”‚ to system promptâ”‚
          â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                  â”‚
          â”‚                                  â–¼
          â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚â—€â”€â”€â”€â”€â”€â”€â”€step responseâ”€â”€â”€â”‚ CONTEXT INJECTIONâ”‚
          â”‚                        â”‚ NFJ-Visionary   â”‚
          â”‚                        â”‚ + Step Instructionsâ”‚
          â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LLM        â”‚
â”‚ MAXIMUM POWER   â”‚
â”‚ Reasoning as    â”‚
â”‚ NFJ-Visionary   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    callback   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LLM        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚      MCP        â”‚
â”‚ Returns insightsâ”‚               â”‚ Saves + Next    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                                 â”‚
          â”‚                                 â–¼
          â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                        â”‚ DYNAMIC LOADER  â”‚
          â”‚                        â”‚ contexts/agents/â”‚
          â”‚                        â”‚ /eeps/stp-      â”‚
          â”‚                        â”‚ adapter.yaml    â”‚
          â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                  â”‚
          â”‚                       [CYCLE REPEATS WITH
          â”‚                        DIFFERENT CONTEXTS]
          â”‚                                  â”‚
          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€step 2 responseâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LLM        â”‚
â”‚ MAXIMUM POWER   â”‚
â”‚ Reasoning as    â”‚
â”‚ STP-Adapter     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
      [CONTINUES...]
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USER        â”‚
â”‚ Receives full   â”‚
â”‚ synthesis from  â”‚
â”‚ multiple deep   â”‚
â”‚ reasoning cyclesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## **KEY DIFFERENCES**

### **CURRENT (Broken)**
- âŒ Static hardcoded prompts
- âŒ Same generic context every step  
- âŒ No personality switching
- âŒ Shallow reasoning

### **TARGET (Dynamic)**
- âœ… Dynamic context loading from YAML files
- âœ… Different personality each step
- âœ… True context injection
- âœ… Maximum reasoning power per lens

## **THE BIDIRECTIONAL MAGIC**
Each cycle the LLM gets **COMPLETELY DIFFERENT INSTRUCTIONS** based on:
1. **Which context file** is loaded (NFJ-Visionary vs STP-Adapter)
2. **Which step** in the workflow (define vs analyze vs synthesize)  
3. **Previous results** from earlier steps

This creates **EMERGENT INTELLIGENCE** through context orchestration!